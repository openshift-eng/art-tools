apiVersion: tekton.dev/v1beta1
kind: Pipeline
metadata:
  name: doomsday-pipeline
spec:
  params:
    - description: 'OCP major version, eg: 4.15'
      name: major
      type: string
    - description: 'Full version, eg: 4.15.5'
      name: version
      type: string
  tasks:
    - name: run-script
      params:
        - name: major
          value: $(params.major)
        - name: version
          value: $(params.version)
        - name: pipelinerun_url
          value: 'https://console-openshift-console.apps.artc2023.pc3z.p1.openshiftapps.com/k8s/ns/$(context.pipelineRun.namespace)/tekton.dev~v1beta1~PipelineRun/$(context.pipelineRun.name)'
      taskRef:
        kind: Task
        name: doomsday-script-task
